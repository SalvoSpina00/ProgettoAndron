{"version":3,"sources":["webpack:///src/app/pages/compra/compra.page.scss","webpack:///src/app/pages/compra/compra.page.html","webpack:///src/app/pages/compra/compra.module.ts","webpack:///src/app/pages/compra/compra.page.ts","webpack:///src/app/pages/compra/compra-routing.module.ts"],"names":["CompraPageModule","imports","declarations","CompraPage","modalCtrl","cartService","request","utilities","router","prodotti","cartItemCount","upperPrice","undefined","lowerPrice","page","psize","filtro","termine","getTotalElements","initializeItems","add","get","path","httpParam","min","max","handler","response","console","log","t","push","error","alertError","navigate","header","message","event","target","complete","create","component","modal","onDidDismiss","then","present","data","value","trim","product","JSON","stringify","id","tipo","nome","read","selector","template","routes","CompraPageRoutingModule","forChild","exports"],"mappings":"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","file":"pages-compra-compra-module-es5.js","sourcesContent":["export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJjb21wcmEucGFnZS5zY3NzIn0= */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button autoHide=\\\"false\\\"></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>\\n        <ion-text>Compra</ion-text>\\n    </ion-title>\\n  </ion-toolbar>\\n  <ion-toolbar>\\n    <ion-searchbar  (keyup.enter)=\\\"filter($event)\\\" placeholder=\\\"Cerca\\\"></ion-searchbar>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-button size=\\\"small\\\" shape=\\\"round\\\"(click)=\\\"searchFilter()\\\">\\n        <ion-icon name=\\\"options\\\"></ion-icon>\\n      </ion-button>\\n      <ion-button size=\\\"small\\\" shape=\\\"round\\\" (click)=\\\"openCart()\\\">\\n        <ion-icon ios=\\\"ios-cart\\\" md=\\\"md-cart\\\"></ion-icon>\\n        {{this.cartItemCount}}\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n  <ion-toolbar *ngIf=\\\"filtro==true\\\">\\n    <ion-button size=\\\"small\\\" expand=\\\"full\\\" (click)=\\\"rimuoviFiltri()\\\">Rimuovi filtro</ion-button>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content>\\n\\n  <ion-list>\\n    <ion-card style=\\\"background-color:rgb(29, 39, 61)\\\" *ngIf=\\\"prodotti?.length==0\\\">\\n      <ion-card-header>\\n        <ion-card-subtitle>\\n          <div class=\\\"ion-text-center\\\">\\n            Attenzione!\\n          </div>\\n        </ion-card-subtitle>\\n        <ion-card-content>\\n          Attualmente non sono presenti prodotti da poter acquistare usando gli Andron.<br>Controlla nei prossimi giorni! \\n        </ion-card-content>\\n      </ion-card-header>\\n    </ion-card>\\n\\n    <ion-card *ngFor=\\\"let p of prodotti\\\">\\n      <ion-card-content>\\n        <ion-card-subtitle>\\n          <ion-row>\\n            <ion-col>\\n              <div class=\\\"ion-text-center\\\">\\n                Fornito da:\\n              </div>\\n            </ion-col>\\n            <ion-col class=\\\"ion-text-center\\\">\\n              <div (click)=\\\"feedback(p.impresa,'impresa',p.fornitore)\\\">\\n                {{p.fornitore}}\\n              </div>\\n            </ion-col>\\n          </ion-row>\\n        </ion-card-subtitle>\\n          <ion-card-title style=\\\"font-size:20px\\\" class=\\\"ion-text-center\\\" (click)=\\\"clickItem(p)\\\">{{ p.nome }}</ion-card-title>\\n\\n        <ion-row>\\n          <ion-col size=\\\"4\\\">\\n            <div>\\n              <ion-avatar slot=\\\"start\\\">\\n                <ion-img src=\\\"{{ p.img }}\\\"></ion-img>\\n              </ion-avatar>\\n            </div>\\n          </ion-col>\\n\\n          <ion-col size=\\\"8\\\">\\n            <div class=\\\"ion-align-items-left\\\">\\n              {{ p.descrizione }}\\n            </div>\\n          </ion-col>\\n        </ion-row>\\n        \\n        <ion-row>\\n          <ion-col >\\n            <div style=\\\"color: tomato;\\\">\\n              Prezzo\\n            </div>\\n          </ion-col>\\n\\n          <ion-col>\\n            <div>\\n              {{p.andron}} Andron\\n            </div>\\n          </ion-col>\\n\\n        </ion-row>\\n          \\n        <ion-row>\\n          <ion-col >\\n            <div style=\\\"color: tomato;\\\">\\n              Quantita disponibile:\\n            </div>\\n          </ion-col>\\n\\n          <ion-col *ngIf=\\\"p.quantita>0\\\">\\n                {{ p.quantita}}\\n          </ion-col>\\n\\n          <ion-col *ngIf=\\\"p.quantita==0\\\">\\n            <div class=\\\"ion-text-center\\\"  style=\\\"color: red\\\">\\n              ESAURITO\\n            </div>\\n          </ion-col>\\n\\n        </ion-row>\\n              \\n        <ion-row>\\n          <ion-col>\\n            <div>\\n              <ion-button class=\\\"ion-float-right\\\" fill=\\\"clear\\\" (click)=\\\"cartService.addProduct(p); incrementCounter()\\\" *ngIf=\\\"p.quantita>0\\\">\\n                Aggiungi al Carrello <ion-icon name=\\\"add\\\" style=\\\"color: green\\\"></ion-icon>\\n              </ion-button>\\n            </div>\\n          </ion-col>\\n          \\n        </ion-row>\\n      </ion-card-content>\\n    </ion-card>\\n\\n    <ion-infinite-scroll threshold=\\\"100px\\\" (ionInfinite)=\\\"loadmore($event)\\\">\\n      <ion-infinite-scroll-content loadingSpinner=\\\"bubbles\\\" loadingText=\\\"Caricamento...\\\">\\n      </ion-infinite-scroll-content>\\n    </ion-infinite-scroll>\\n  </ion-list>\\n\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CompraPageRoutingModule } from './compra-routing.module';\n\nimport { CompraPage } from './compra.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    CompraPageRoutingModule\n  ],\n  declarations: [CompraPage]\n})\nexport class CompraPageModule {}\n","import { Component, ViewChild, ElementRef } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\nimport { CartModalPage } from '../cart-modal/cart-modal.page';\nimport { SearchFilterPage } from '../../pages/modal/search-filter/search-filter.page';\nimport { RequestService } from 'src/app/services/request.service';\nimport { UtilitiesService } from 'src/app/services/utilities.service';\nimport { CartService } from 'src/app/services/cart.service';\nimport { Router } from '@angular/router';\n\n\n@Component({\n  selector: 'app-compra',\n  templateUrl: './compra.page.html',\n  styleUrls: ['./compra.page.scss']\n})\nexport class CompraPage {\n\n  [x: string]: any;\n  \n  prodotti: any[] = [];\n  cartItemCount: number = 0;\n  upperPrice: number = undefined;\n  lowerPrice: number = undefined;\n\n  page:number = 0;\n  psize:number = 5;\n  filtro:boolean = false;\n  termine:string = null;\n\n\n  \n  @ViewChild('cart', { read: ElementRef })fab: ElementRef;\n  constructor(public modalCtrl: ModalController, private cartService: CartService, private request: RequestService, private utilities : UtilitiesService, private router: Router) {\n      this.cartItemCount = this.cartService.getTotalElements();\n      this.initializeItems();\n  }\n\n  incrementCounter(){\n    this.cartItemCount++;\n  }\n\n  initializeItems(add=()=>{}) {\n    this.request.get({\n      path:\"/products\",\n\n      httpParam:{\n        \"_page\":this.page,\n        \"_psize\":this.psize,\n        \"filtro\":this.filtro,\n        \"termine\":this.termine,\n        \"min\":this.min,\n        \"max\":this.max\n      },\n\n      handler:(response)=>{\n        console.log(response)\n        for (const t of response[\"_msg\"]) {\n          this.prodotti.push(t);\n        };\n        add()\n      },\n\n      error: ()=>{\n        this.utilities.alertError({\n          handler:()=>{this.router.navigate([\"/home\"])},\n          header:\"Attenzione!\", \n          message:\"Si è verificato un errore, la pagina attualmente non è disponibile, riporva più tardi.\"\n        })\n      }\n      \n    })\n  }\n\n  loadmore(event) {\n    this.page++\n    this.initializeItems(()=>{event.target.complete()})\n  }\n  \n  async openCart(){\n    let modal = await this.modalCtrl.create({\n      component: CartModalPage,\n    });\n    modal.onDidDismiss().then(()=>{\n      this.cartItemCount = this.cartService.getTotalElements();\n    })\n    return await modal.present();\n  }\n\n  async searchFilter () {\n    const modal = await this.modalCtrl.create({\n      component: SearchFilterPage\n    });\n    modal.onDidDismiss().then((data)=>{\n      this.upperPrice = data.data[\"upper\"] ?? 300;\n      this.lowerPrice = data.data[\"lower\"] ?? 0;\n      this.filtro=true;\n      this.initializeItems()\n    });\n    return await modal.present();\n  }\n\n  rimuoviFiltri() {\n    this.page = 0\n    this.filtro = false;\n    this.termine = '';\n    this.lowerPrice=undefined;\n    this.upperPrice=undefined;\n    this.initializeItems()\n  }\n\n  filter(event) {\n    this.page = 0\n    this.filtro = true;\n    this.termine = event.target.value.trim()\n    this.initializeItems()\n  }\n\n  clickItem(product : any){\n    this.router.navigate([\"/descrizione-prodotto\", {\"product\": JSON.stringify(product)}]);\n  }\n\n  feedback(id:string,tipo:string,nome:string){\n    this.router.navigate([\"/infofeedback\", { \"id\": id, \"tipo\":tipo, \"nome\": nome }]);\n  }\n\n\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CompraPage } from './compra.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CompraPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CompraPageRoutingModule {}\n"]}