{"version":3,"sources":["./src/app/pages/richiesta/richiesta.module.ts","./src/app/pages/richiesta/richiesta.page.ts","./src/app/pages/richiesta/richiesta.page.scss","./src/app/pages/richiesta/richiesta-routing.module.ts","./src/app/pages/richiesta/richiesta.page.html"],"names":[],"mappings":"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","file":"pages-richiesta-richiesta-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RichiestaPageRoutingModule } from './richiesta-routing.module';\n\nimport { RichiestaPage } from './richiesta.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RichiestaPageRoutingModule\n  ],\n  declarations: [RichiestaPage]\n})\nexport class RichiestaPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ApiService } from 'src/app/services/api-service.service';\nimport { AlertController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-richiesta',\n  templateUrl: './richiesta.page.html',\n  styleUrls: ['./richiesta.page.scss'],\n})\nexport class RichiestaPage implements OnInit {\n  \n  idServizio: number;\n  servizio= null;\n\n  msg: string;\n  date: Date;\n  errore:string;\n\n  constructor(private route: ActivatedRoute, private apiService: ApiService,private alertCtrl: AlertController, private router:Router) {\n   \n   }\n\n  ngOnInit() {\n    this.errore=\"\";\n    this.idServizio = JSON.parse(this.route.snapshot.paramMap.get(\"id\"));\n    console.log(this.idServizio)\n    this.getServizio()\n  }\n\n  getServizio() {\n    this.apiService.getServizio(this.idServizio).then(retApiService => {\n      retApiService.subscribe(results => {\n        this.servizio = results[\"_msg\"];\n        console.log(this.servizio);\n      });\n    })\n  }\n\n  feedback(id: string, tipo: string, nome: string) {\n    this.router.navigate([\"/infofeedback\", { \"id\": id, \"tipo\": tipo, \"nome\": nome }]);\n  }\n\n\n  async richiesta(){\n    \n\n    this.apiService.getBudget().then(retApiService => {\n      return retApiService.subscribe(async response => {\n        let saldo = response[\"_msg\"].budget;\n        if (saldo < 10) {\n          const alert = await this.alertCtrl.create({\n            header: \"Attenzione\",\n            message: \"Saldo insufficiente.\",\n            buttons: [\n              {\n                text: 'No',\n                role: 'cancel',\n\n              }]\n          })\n          await alert.present();\n        }\n        else{\n\n          if (this.date && this.msg) {\n            if (this.msg.trim() == '') {\n              this.errore = \"Compila adeguatamente il campo messaggio\"\n              return\n            }\n\n            const alert = await this.alertCtrl.create({\n              header: \"Attenzione\",\n              message: \"Una volta effettuata la richiesta i tuoi token saranno rimossi. Verranno inseriti se la richiesta non andra' a buon fine\",\n              buttons: [\n                {\n                  text: 'No',\n                  role: 'cancel',\n                },\n                {\n                  text: 'Si',\n                  handler: () => {\n                    this.apiService.richiesta(this.msg, this.date, this.servizio.id, this.servizio.idUtente).then(retApiService => {\n                      retApiService.subscribe(results => {\n                        this.alertCtrl.create({\n                          header: \"Richiesta Effettuata Correttamente\",\n                          buttons: [\n                            {\n                              text: 'OK',\n                              role: 'cancel',//! con role cancel anche se non viene premuto viene eseguito l'handler\n                            }]\n                        }).then(alert => alert.present());\n                      });\n                    })\n                  }\n                }\n              ]\n            })\n            await alert.present();\n          }\n          else {\n            this.errore = \"Tutti i campi devono essere compilati\"\n          }\n\n          \n        }\n      })\n    })\n\n\n    \n  }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJyaWNoaWVzdGEucGFnZS5zY3NzIn0= */\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { RichiestaPage } from './richiesta.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RichiestaPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class RichiestaPageRoutingModule {}\n","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Richiesta</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-card>\\n    <ion-card-content>\\n    <ion-card-subtitle>\\n      <ion-row>\\n        <ion-col>\\n          <div class=\\\"ion-text-center\\\">\\n            Fornito da:\\n          </div>\\n        </ion-col>\\n        <ion-col class=\\\"ion-text-center\\\">\\n          <div (click)=\\\"feedback(servizio?.idUtente,'utente',servizio?.Nome + ' ' + servizio?.Cognome)\\\">\\n            {{servizio?.Nome}} {{servizio?.Cognome}}\\n          </div>\\n        </ion-col>\\n      </ion-row>\\n    </ion-card-subtitle>\\n    <ion-card-title>\\n      <div class=\\\"ion-text-center\\\">\\n        {{servizio?.nomeServizio}}\\n      </div>\\n    </ion-card-title>\\n    <ion-grid>\\n      <ion-row>\\n        {{servizio?.descrizione}}\\n      </ion-row>\\n      <ion-row>\\n        <ion-col>\\n          <div class=\\\"ion-text-center\\\" style=\\\"color: tomato;\\\">\\n            Prezzo:\\n          </div>\\n        </ion-col>\\n        <ion-col>\\n          <div class=\\\"ion-text-center\\\">\\n            {{servizio?.prezzo}} TOKEN\\n          </div>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n\\n    </ion-card-content>\\n  </ion-card>\\n\\n  <ion-list>\\n    <ion-item>\\n      <ion-textarea placeholder=\\\"Messaggio...\\\"  maxlength=\\\"200\\\" [(ngModel)]=\\\"msg\\\"></ion-textarea>\\n    </ion-item>\\n\\n    <ion-item>\\n      <ion-label>Data del servizio</ion-label>\\n      <ion-datetime displayFormat=\\\"MMM DD, YYYY HH:mm\\\" min=\\\"2020\\\" max=\\\"2025\\\" [(ngModel)]=\\\"date\\\"></ion-datetime>\\n    </ion-item>\\n  </ion-list>\\n\\n  <ion-button id=\\\"myButtonYellow\\\" expand=\\\"full\\\" (click)=\\\"richiesta()\\\">Richiedi Servizio</ion-button>\\n\\n  <p>{{ this.errore }}</p>\\n</ion-content>\\n\\n\";"],"sourceRoot":"webpack:///"}