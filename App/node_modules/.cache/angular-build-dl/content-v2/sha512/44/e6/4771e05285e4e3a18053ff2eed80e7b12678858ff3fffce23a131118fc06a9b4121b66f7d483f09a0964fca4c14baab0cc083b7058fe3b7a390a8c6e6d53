{"version":3,"sources":["./src/app/pages/servizi-collettivita/servizi-collettivita.page.ts","./src/app/pages/servizi-collettivita/servizi-collettivita.page.html","./src/app/pages/servizi-collettivita/servizi-collettivita-routing.module.ts","./src/app/pages/servizi-collettivita/servizi-collettivita.page.scss","./src/app/pages/servizi-collettivita/servizi-collettivita.module.ts"],"names":[],"mappings":"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","file":"pages-servizi-collettivita-servizi-collettivita-module-es2015.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ApiService } from 'src/app/services/api-service.service';\nimport { NavController } from '@ionic/angular';\nimport { ActivatedRoute, } from '@angular/router';\n\n\n@Component({\n  selector: 'app-servizi-collettivita',\n  templateUrl: './servizi-collettivita.page.html',\n  styleUrls: ['./servizi-collettivita.page.scss'],\n})\nexport class ServiziCollettivitaPage implements OnInit {\n  \n  msg:string;\n  date: Date;\n  bisognoSegnalato: boolean;\n  idBisogno: string;\n  idEnte: string;\n  idBisognoEsterno: string;\n  \n\n\n  enti : any;\n  bisogni : any;\n  errore:string;\n    \n  imgSrc:any;\n  imgSend:any;\n  mobile:boolean;\n\n  constructor(private api: ApiService,private route : ActivatedRoute,private navCtrl : NavController){\n    this.bisognoSegnalato=false;\n    this.imgSrc= this.api.img\n    this.mobile = !(this.api.getPlatform().includes(\"mobileweb\") || this.api.getPlatform().includes(\"desktop\")) \n\n    let handler= () => {\n      this.navCtrl.navigateForward(\"/home\");\n    }\n\n    Promise.all([this.api.getEts(),this.api.getBisogni(\"\",\"\",\"True\")]).then(values =>{\n      values[0].subscribe({\n        next: (resp) =>{\n          this.enti =resp[\"_msg\"]\n        },\n        error: (error) => {\n          this.api.simplyAlert(handler)\n        }\n      })\n      values[1].subscribe({\n        next: (resp) =>{\n          this.bisogni = resp[\"_msg\"]\n          this.idBisognoEsterno= JSON.parse(this.route.snapshot.paramMap.get(\"bisogno\"))\n          if (this.idBisognoEsterno!=null){\n            this.bisognoSegnalato=true;\n          }\n        },\n        error: (error) => {\n          this.api.simplyAlert(handler)\n        }\n      })\n    })\n  }\n\n  ngOnInit() {}\n\n  sendServizioCollettivita(){\n    this.msg = this.msg ?? \"\";\n    \n    if (this.msg.trim() === \"\" || this.idEnte == null || this.date == null || (this.bisognoSegnalato && this.idBisogno == null )) {\n        this.errore = \"Compila adeguatamente tutti i campi\"\n        return\n    }\n    if (this.imgSend == null){\n      this.errore=\"Inserisci un allegato\"\n      return \n    }\n      \n    let data = {\n      \"msg\": this.msg,\n      \"date\": this.date,\n      \"bisognoSegnalato\": this.bisognoSegnalato,\n      \"idBisogno\" : this.idBisogno ?? 0,\n      \"idEnte\": this.idEnte ,\n      \"foto\" : this.imgSend\n    }\n\n    let handler= () => {\n      this.navCtrl.navigateForward(\"/home\");\n    }\n\n    this.api.newServizioCollettivita(data).then(retApiService => {\n      retApiService.subscribe({\n        next: (result) => {\n          this.api.simplyAlert(handler, \"Operazione effettuata\", \"Grazie per il tuo contributo!\")\n        },\n        error: (err) => {\n          this.api.simplyAlert(handler)\n        }\n      })\n    })\n  }\n\n\n  chooseImage($event=null){\n    let handler = (img)=>{\n      this.imgSrc =  'data:image/jpeg;base64,' + img;\n      this.imgSend = img;\n    }\n\n    if (this.mobile){\n      this.api.chooseImage(handler)\n    }\n    else{\n      this.api.getImageBrowser($event,handler)\n    }\n  }\n}\n","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>Collettivita</ion-title>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button autoHide=\\\"false\\\"></ion-menu-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n\\n<ion-content>\\n  <ion-card>\\n    <ion-card-header>\\n      <ion-card-title>\\n        <div class=\\\"ion-text-center\\\">\\n          Benvenuto!\\n        </div>\\n      </ion-card-title>\\n    </ion-card-header>\\n    <ion-card-content>\\n      Qui potrai inserire eventuali servizi offerti alla comunita'. Compilare tutti i campi per mandare la richiesta, una volta verificata verranno caricati dei token sul tuo account.\\n    </ion-card-content>\\n  </ion-card>\\n\\n\\n  <ion-list>\\n      <ion-img src=\\\"{{ imgSrc }}\\\"></ion-img>\\n      <ion-button *ngIf=\\\"mobile\\\"  id=\\\"myButtonYellow\\\" expand=\\\"full\\\" (click)=\\\"chooseImage()\\\">Inserisci foto</ion-button>\\n      <ion-button *ngIf=\\\"!mobile\\\" id=\\\"myButtonYellow\\\" expand=\\\"full\\\" (click)=\\\"f.click()\\\">Inserisci foto</ion-button>\\n      <input  class=\\\"ion-hide\\\" #f type=\\\"file\\\" (change)=\\\"chooseImage($event)\\\" id=\\\"file-input\\\" accept=\\\"image/png, image/jpeg\\\">\\n    <ion-item>\\n      <ion-textarea placeholder=\\\"Descrivi il tuo servizio offerto...\\\"   maxlength=\\\"150\\\"[(ngModel)]=\\\"msg\\\"></ion-textarea>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label>Data del servizio offerto</ion-label>\\n      <ion-datetime displayFormat=\\\"MMM DD, YYYY HH:mm\\\" min=\\\"2020\\\" max=\\\"2025\\\" [(ngModel)]=\\\"date\\\"></ion-datetime>\\n    </ion-item>\\n      \\n    <ion-item>\\n      <ion-label>ETS Certificatore</ion-label>\\n      <ion-select [(ngModel)]=\\\"idEnte\\\" cancelText=\\\"Esci\\\" okText=\\\"Scegli\\\">\\n        <ion-select-option  *ngFor=\\\"let i of enti\\\" value={{i.id}}>{{i.nome}}</ion-select-option>\\n      </ion-select>\\n    </ion-item>\\n\\n    <ion-item>\\n      <ion-label>E' un bisogno segnalato?</ion-label>\\n      <ion-toggle [(ngModel)]=\\\"bisognoSegnalato\\\"></ion-toggle>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label>Bisogno</ion-label>\\n      <ion-select  [(ngModel)]=\\\"idBisogno\\\" value=\\\"{{idBisognoEsterno}}\\\"  [disabled]=\\\"!bisognoSegnalato\\\" cancelText=\\\"Esci\\\" okText=\\\"Scegli\\\">\\n        <ion-select-option *ngFor=\\\"let i of bisogni\\\" value={{i?.id}}>{{i?.nome}}</ion-select-option>\\n      </ion-select>\\n    </ion-item>\\n  \\n  </ion-list>\\n    <p class=\\\"ion-text-center\\\" style=\\\"   color: var(--ion-color-danger);\\\">{{ this.errore }}</p>\\n  <ion-button id=\\\"myButtonYellow\\\" expand=\\\"full\\\" (click)=\\\"sendServizioCollettivita()\\\">Invia</ion-button>\\n\\n\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ServiziCollettivitaPage } from './servizi-collettivita.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ServiziCollettivitaPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ServiziCollettivitaPageRoutingModule {}\n","export default \"ion-img {\\n  height: 30vh;\\n  width: auto;\\n  margin: auto;\\n  display: block;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NlcnZpemktY29sbGV0dGl2aXRhLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLFlBQUE7RUFDQSxXQUFBO0VBQ0EsWUFBQTtFQUNBLGNBQUE7QUFDSiIsImZpbGUiOiJzZXJ2aXppLWNvbGxldHRpdml0YS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24taW1ne1xuICAgIGhlaWdodDogMzB2aDtcbiAgICB3aWR0aDogYXV0bztcbiAgICBtYXJnaW46IGF1dG87XG4gICAgZGlzcGxheTogYmxvY2s7XG4gICAgXG59XG4iXX0= */\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ServiziCollettivitaPageRoutingModule } from './servizi-collettivita-routing.module';\n\nimport { ServiziCollettivitaPage } from './servizi-collettivita.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ServiziCollettivitaPageRoutingModule\n  ],\n  declarations: [ServiziCollettivitaPage]\n})\nexport class ServiziCollettivitaPageModule {}\n"],"sourceRoot":"webpack:///"}