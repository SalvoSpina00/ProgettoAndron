{"version":3,"sources":["webpack:///src/app/pages/compra/compra.page.scss","webpack:///src/app/pages/compra/compra.page.html","webpack:///src/app/pages/compra/compra.module.ts","webpack:///src/app/pages/compra/compra.page.ts","webpack:///src/app/pages/compra/compra-routing.module.ts"],"names":["CompraPageModule","imports","declarations","CompraPage","navCtrl","menuCtrl","popoverCtrl","alertCtrl","modalCtrl","toastCtrl","cartService","router","apiService","cartItemCount","filtro","termine","upperPrice","lowerPrice","cart","getCart","page","psize","initializeItems","enable","getAllBeni","then","retApiService","subscribe","next","response","prodotti","error","simplyAlert","navigate","product","addProduct","create","component","modal","onDidDismiss","data","getCartItemCount","present","undefined","componentProps","event","val","target","value","trim","JSON","stringify","id","tipo","nome","results","t","push","complete","read","selector","template","routes","path","CompraPageRoutingModule","forChild","exports"],"mappings":"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","file":"pages-compra-compra-module-es5.js","sourcesContent":["export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJjb21wcmEucGFnZS5zY3NzIn0= */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button autoHide=\\\"false\\\"></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>\\n        <ion-text>Compra</ion-text>\\n    </ion-title>\\n  </ion-toolbar>\\n  <ion-toolbar>\\n    <ion-searchbar  (keyup.enter)=\\\"filter($event)\\\" placeholder=\\\"Cerca\\\"></ion-searchbar>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-button size=\\\"small\\\" shape=\\\"round\\\"(click)=\\\"searchFilter()\\\">\\n        <ion-icon name=\\\"options\\\"></ion-icon>\\n      </ion-button>\\n      <ion-button size=\\\"small\\\" shape=\\\"round\\\" (click)=\\\"openCart()\\\">\\n        <ion-icon ios=\\\"ios-cart\\\" md=\\\"md-cart\\\"></ion-icon>\\n        {{this.cartItemCount}}\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n  <ion-toolbar *ngIf=\\\"filtro==true\\\">\\n    <ion-button size=\\\"small\\\" expand=\\\"full\\\" (click)=\\\"rimuoviFiltri()\\\">Rimuovi filtro</ion-button>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content>\\n\\n  <ion-list>\\n    <ion-card style=\\\"background-color:rgb(29, 39, 61)\\\" *ngIf=\\\"prodotti?.length==0\\\">\\n      <ion-card-header>\\n        <ion-card-subtitle>\\n          <div class=\\\"ion-text-center\\\">\\n            Attenzione!\\n          </div>\\n        </ion-card-subtitle>\\n        <ion-card-content>\\n          Attualmente non sono presenti prodotti da poter acquistare usando gli Andron.<br>Controlla nei prossimi giorni! \\n        </ion-card-content>\\n      </ion-card-header>\\n    </ion-card>\\n\\n    <ion-card *ngFor=\\\"let p of prodotti\\\">\\n      <ion-card-content>\\n        <ion-card-subtitle>\\n          <ion-row>\\n            <ion-col>\\n              <div class=\\\"ion-text-center\\\">\\n                Fornito da:\\n              </div>\\n            </ion-col>\\n            <ion-col class=\\\"ion-text-center\\\">\\n              <div (click)=\\\"feedback(p.impresa,'impresa',p.fornitore)\\\">\\n                {{p.fornitore}}\\n              </div>\\n            </ion-col>\\n          </ion-row>\\n        </ion-card-subtitle>\\n          <ion-card-title style=\\\"font-size:20px\\\" class=\\\"ion-text-center\\\" (click)=\\\"clickItem(p)\\\">{{ p.nome }}</ion-card-title>\\n\\n        <ion-row>\\n          <ion-col size=\\\"4\\\">\\n            <div>\\n              <ion-avatar slot=\\\"start\\\">\\n                <ion-img src=\\\"{{ p.img }}\\\"></ion-img>\\n              </ion-avatar>\\n            </div>\\n          </ion-col>\\n\\n          <ion-col size=\\\"8\\\">\\n            <div class=\\\"ion-align-items-left\\\">\\n              {{ p.descrizione }}\\n            </div>\\n          </ion-col>\\n        </ion-row>\\n        \\n        <ion-row>\\n          <ion-col >\\n            <div style=\\\"color: tomato;\\\">\\n              Prezzo\\n            </div>\\n          </ion-col>\\n\\n          <ion-col>\\n            <div>\\n              {{p.andron}} Andron\\n            </div>\\n          </ion-col>\\n\\n        </ion-row>\\n          \\n        <ion-row>\\n          <ion-col >\\n            <div style=\\\"color: tomato;\\\">\\n              Quantita disponibile:\\n            </div>\\n          </ion-col>\\n\\n          <ion-col *ngIf=\\\"p.quantita>0\\\">\\n                {{ p.quantita}}\\n          </ion-col>\\n\\n          <ion-col *ngIf=\\\"p.quantita==0\\\">\\n            <div class=\\\"ion-text-center\\\"  style=\\\"color: red\\\">\\n              ESAURITO\\n            </div>\\n          </ion-col>\\n\\n        </ion-row>\\n              \\n        <ion-row>\\n          <ion-col>\\n            <div>\\n              <ion-button class=\\\"ion-float-right\\\" fill=\\\"clear\\\" (click)=\\\"addToCart(p)\\\" *ngIf=\\\"p.quantita>0\\\">\\n                Aggiungi al Carrello <ion-icon name=\\\"add\\\" style=\\\"color: green\\\"></ion-icon>\\n              </ion-button>\\n            </div>\\n          </ion-col>\\n          \\n        </ion-row>\\n      </ion-card-content>\\n    </ion-card>\\n\\n    <ion-infinite-scroll threshold=\\\"100px\\\" (ionInfinite)=\\\"loadmore($event)\\\">\\n      <ion-infinite-scroll-content loadingSpinner=\\\"bubbles\\\" loadingText=\\\"Caricamento...\\\">\\n      </ion-infinite-scroll-content>\\n    </ion-infinite-scroll>\\n  </ion-list>\\n\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CompraPageRoutingModule } from './compra-routing.module';\n\nimport { CompraPage } from './compra.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    CompraPageRoutingModule\n  ],\n  declarations: [CompraPage]\n})\nexport class CompraPageModule {}\n","import { Component, ViewChild, ElementRef } from '@angular/core';\nimport {\n  NavController,\n  AlertController,\n  MenuController,\n  ToastController,\n  PopoverController,\n  ModalController \n} from '@ionic/angular';\n\nimport { CartService } from \"../../services/cart.service\";\nimport { CartModalPage } from '../cart-modal/cart-modal.page';\n\nimport { SearchFilterPage } from '../../pages/modal/search-filter/search-filter.page';\nimport { Router } from '@angular/router';\nimport { Ordine } from 'src/app/models/ordine';\nimport { ApiService } from 'src/app/services/api-service.service';\n\n\n@Component({\n  selector: 'app-compra',\n  templateUrl: './compra.page.html',\n  styleUrls: ['./compra.page.scss']\n})\nexport class CompraPage {\n\n  [x: string]: any;\n  public cart : Ordine[];\n  prodotti: any;\n  cartItemCount: number;\n  upperPrice: number;\n  lowerPrice: number;\n\n  page:number;\n  psize:number\n  filtro:boolean\n  termine:string;\n\n\n  \n  @ViewChild('cart', { read: ElementRef })fab: ElementRef;\n  constructor(\n    public navCtrl: NavController,\n    public menuCtrl: MenuController,\n    public popoverCtrl: PopoverController,\n    public alertCtrl: AlertController,\n    public modalCtrl: ModalController,\n    public toastCtrl: ToastController,\n    private cartService: CartService,\n    private router: Router,\n    private apiService: ApiService\n  ) {\n      this.cartItemCount = 0;\n      this.filtro=false;\n      this.termine=null;\n      this.upperPrice = null;\n      this.lowerPrice = null;\n\n      this.cart = this.cartService.getCart();\n      this.cartItemCount = 0;\n      this.page=0;\n      this.psize=5;\n      this.initializeItems();\n      this.menuCtrl.enable(true);\n  }\n\n  ngOnInit() {}\n\n  //!Inizializzo la pagina\n  initializeItems() {\n    this.apiService.getAllBeni(this.page,this.psize,this.filtro,this.termine,this.lowerPrice,this.upperPrice).then(retApiService => {\n      retApiService.subscribe({\n        next: (response)=>{this.prodotti = response[\"_msg\"];},\n        error: ()=>{\n          this.apiService.simplyAlert(()=>{this.router.navigate([\"/home\"])},\"Attenzione!\", \"Si è verificato un errore, la pagina attualmente non è disponibile, riporva più tardi.\")\n        }\n      })\n    })\n  }\n\n// start cart\n  addToCart(product) {\n    this.cartService.addProduct(product);\n    this.cartItemCount += 1;\n  }\n\n  async openCart(){\n    const modal = await this.modalCtrl.create({\n      component: CartModalPage,\n    });\n    modal.onDidDismiss().then((data)=>{\n      this.cartItemCount = this.cartService.getCartItemCount();\n    });\n    return await modal.present();\n  }\n\n  async searchFilter () {\n    if ((this.upperPrice == undefined) && (this.lowerPrice == undefined)){\n      this.upperPrice = 500;\n      this.lowerPrice = 0;\n    }\n    const modal = await this.modalCtrl.create({\n      component: SearchFilterPage,\n      componentProps: {\n          upperPrice: this.upperPrice,\n          lowerPrice: this.lowerPrice\n      }\n    });\n    modal.onDidDismiss().then((data)=>{\n      this.upperPrice = data.data[\"upper\"];\n      this.lowerPrice = data.data[\"lower\"];\n      this.filtro=true;\n      this.initializeItems()\n    });\n    return await modal.present();\n  }\n\n  rimuoviFiltri() {\n    this.page = 0\n    this.filtro = false;\n    this.termine = '';\n    this.lowerPrice=undefined;\n    this.upperPrice=undefined;\n    this.initializeItems()\n  }\n\n  filter(event) {\n    let val = event.target.value;\n    if (val.trim() != '') {\n      this.page = 0\n      this.filtro = true;\n      this.termine = val;\n    }\n    else {\n      this.termine = ''\n    }\n    this.initializeItems()\n  }\n\n  clickItem(product : any){\n    this.router.navigate([\"/descrizione-prodotto\", {\"product\": JSON.stringify(product)}]);\n  }\n\n  feedback(id:string,tipo:string,nome:string){\n    this.router.navigate([\"/infofeedback\", { \"id\": id, \"tipo\":tipo, \"nome\": nome }]);\n  }\n\n  loadmore(event) {\n    this.page++\n    this.apiService.getAllBeni(this.page, this.psize, this.filtro, this.termine, this.lowerPrice, this.upperPrice).then(retApiService => {\n      retApiService.subscribe({\n        next: (results)=>{\n          for (const t of results[\"_msg\"]) {\n            this.prodotti.push(t);\n          };\n          event.target.complete();\n        },\n        error: () =>{\n          this.apiService.simplyAlert(()=>{this.router.navigate([\"/home\"])},\"Attenzione!\", \"Si è verificato un errore, la pagina attualmente non è disponibile, riporva più tardi.\")\n        }\n      })\n    })\n  }\n\n\n\n\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CompraPage } from './compra.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CompraPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CompraPageRoutingModule {}\n"]}