{"version":3,"sources":["webpack:///src/app/pages/segnala-bisogni/segnala-bisogni.module.ts","webpack:///src/app/pages/segnala-bisogni/segnala-bisogni.page.scss","webpack:///src/app/pages/segnala-bisogni/segnala-bisogni-routing.module.ts","webpack:///src/app/pages/segnala-bisogni/segnala-bisogni.page.html","webpack:///src/app/pages/segnala-bisogni/segnala-bisogni.page.ts"],"names":["SegnalaBisogniPageModule","imports","declarations","routes","path","component","SegnalaBisogniPageRoutingModule","forChild","exports","SegnalaBisogniPage","formBuilder","apiService","navCtrl","errorMessages","nome","type","message","descrizione","citta","via","segnalaBisogniForm","group","required","maxLength","minLength","imgSrc","img","mobile","getPlatform","includes","get","imgSend","errore","position","data","value","sendBisogni","then","api","subscribe","next","result","simplyAlert","navigateForward","error","err","getCurrentPosition","coords","latitude","longitude","$event","handler","chooseImage","getImageBrowser","selector","template"],"mappings":"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","file":"pages-segnala-bisogni-segnala-bisogni-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SegnalaBisogniPageRoutingModule } from './segnala-bisogni-routing.module';\n\nimport { SegnalaBisogniPage } from './segnala-bisogni.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    IonicModule,\n    SegnalaBisogniPageRoutingModule\n  ],\n  declarations: [SegnalaBisogniPage]\n})\nexport class SegnalaBisogniPageModule {}\n","export default \".error-message {\\n  text-align: center;\\n  color: var(--ion-color-danger);\\n  padding-left: 20px;\\n}\\n\\nion-img {\\n  height: 30vh;\\n  width: auto;\\n  margin: auto;\\n  display: block;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NlZ25hbGEtYmlzb2duaS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxrQkFBQTtFQUNBLDhCQUFBO0VBQ0Esa0JBQUE7QUFDSjs7QUFFQTtFQUNJLFlBQUE7RUFDQSxXQUFBO0VBQ0EsWUFBQTtFQUNBLGNBQUE7QUFDSiIsImZpbGUiOiJzZWduYWxhLWJpc29nbmkucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmVycm9yLW1lc3NhZ2V7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItZGFuZ2VyKTtcbiAgICBwYWRkaW5nLWxlZnQ6IDIwcHg7XG59XG5cbmlvbi1pbWd7XG4gICAgaGVpZ2h0OiAzMHZoO1xuICAgIHdpZHRoOiBhdXRvO1xuICAgIG1hcmdpbjogYXV0bztcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgICBcbn1cbiJdfQ== */\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SegnalaBisogniPage } from './segnala-bisogni.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SegnalaBisogniPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SegnalaBisogniPageRoutingModule {}\n","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button autoHide=\\\"false\\\"></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>\\n        <ion-text>Segnala Bisogni</ion-text>\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-card style=\\\"background-color:rgb(29, 39, 61)\\\">\\n    <ion-card-header>\\n      <ion-card-subtitle>\\n        <div class=\\\"ion-text-center\\\">\\n          Benvenuto!\\n        </div>\\n      </ion-card-subtitle>\\n      <ion-card-content>\\n        In questa pagina potrai segnalare eventuali bisogni, una volta accettati verranno resi disponibili a tutti e chi vorrà potrà occuparsene!\\n      </ion-card-content>\\n    </ion-card-header>\\n  </ion-card>\\n  <form [formGroup]=\\\"segnalaBisogniForm\\\" (ngSubmit)=\\\"submit()\\\">\\n    <ion-list>\\n    \\n      <ion-img src=\\\"{{ imgSrc }}\\\"></ion-img>\\n      <ion-button *ngIf=\\\"mobile\\\"  id=\\\"myButtonYellow\\\" expand=\\\"full\\\" (click)=\\\"chooseImage()\\\">Inserisci foto</ion-button>\\n      <ion-button *ngIf=\\\"!mobile\\\" id=\\\"myButtonYellow\\\" expand=\\\"full\\\" (click)=\\\"f.click()\\\">Inserisci foto</ion-button>\\n      <input  class=\\\"ion-hide\\\" #f type=\\\"file\\\" (change)=\\\"chooseImage($event)\\\" id=\\\"file-input\\\" accept=\\\"image/png, image/jpeg\\\">\\n      <ion-item> <!--!Nome-->\\n        <ion-label position=\\\"floating\\\">Nome</ion-label>\\n        <ion-input formControlName=\\\"nome\\\" autocapitalize inputmode=\\\"text\\\"></ion-input>\\n      </ion-item>\\n      <div *ngFor=\\\"let error of errorMessages.nome\\\">\\n        <ng-container *ngIf=\\\"nome.hasError(error.type) && (nome.dirty || nome.touched)\\\">\\n          <small class=\\\"error-message\\\">{{error.message}}</small>\\n        </ng-container>\\n      </div>\\n\\n      <ion-item> <!--!Descrizione-->\\n        <ion-label position=\\\"floating\\\">Descrizione</ion-label>\\n        <ion-input formControlName=\\\"descrizione\\\" autocapitalize inputmode=\\\"text\\\"></ion-input>\\n      </ion-item>\\n      <div *ngFor=\\\"let error of errorMessages.descrizione\\\">\\n        <ng-container *ngIf=\\\"descrizione.hasError(error.type) && (descrizione.dirty || descrizione.touched)\\\">\\n          <small class=\\\"error-message\\\">{{error.message}}</small>\\n        </ng-container>\\n      </div>\\n\\n      <ion-card *ngIf=\\\"mobile\\\" style=\\\"background-color:rgb(29, 39, 61)\\\">\\n          <ion-card-content>\\n            Se ti trovi sul luogo clicca sul pulsante sottostante per recuperare la posizione!\\n          </ion-card-content>\\n      </ion-card>\\n\\n      <ion-button *ngIf=\\\"mobile\\\" id=\\\"myButtonYellow\\\" expand=\\\"full\\\" (click)=\\\"getPosition()\\\">Recupera posizione</ion-button>\\n\\n\\n      <ion-item> <!--!Citta-->\\n        <ion-label position=\\\"floating\\\">Città</ion-label>\\n        <ion-input formControlName=\\\"citta\\\" autocapitalize inputmode=\\\"text\\\"></ion-input>\\n      </ion-item>\\n      <div *ngFor=\\\"let error of errorMessages.citta\\\">\\n        <ng-container *ngIf=\\\"citta.hasError(error.type) && (citta.dirty || citta.touched)\\\">\\n          <small class=\\\"error-message\\\">{{error.message}}</small>\\n        </ng-container>\\n      </div>\\n\\n\\n      <ion-item> <!--!Via-->\\n        <ion-label position=\\\"floating\\\">Via</ion-label>\\n        <ion-input formControlName=\\\"via\\\" autocapitalize inputmode=\\\"text\\\"></ion-input>\\n      </ion-item>\\n      <div *ngFor=\\\"let error of errorMessages.via\\\">\\n        <ng-container *ngIf=\\\"via.hasError(error.type) && (via.dirty || via.touched)\\\">\\n          <small class=\\\"error-message\\\">{{error.message}}</small>\\n        </ng-container>\\n      </div>\\n\\n\\n      <ion-button [disabled]=\\\"!segnalaBisogniForm.valid\\\" type=\\\"submit\\\" expand=\\\"block\\\">\\n        Segnala Bisogni\\n      </ion-button>\\n      <p class=\\\"error-message\\\">{{this.errore}}</p>\\n    </ion-list>\\n  </form>\\n</ion-content>\\n\";","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { NavController } from '@ionic/angular';\nimport { ApiService } from 'src/app/services/api-service.service';\n\n\n@Component({\n  selector: 'app-segnala-bisogni',\n  templateUrl: './segnala-bisogni.page.html',\n  styleUrls: ['./segnala-bisogni.page.scss'],\n})\nexport class SegnalaBisogniPage implements OnInit {\n\n  imgSrc: any;\n  imgSend: any;\n  position: any;\n  mobile: boolean;\n  errore: string;\n\n  get nome(){\n    return this.segnalaBisogniForm.get(\"nome\")\n  }\n\n  get descrizione(){\n    return this.segnalaBisogniForm.get(\"descrizione\")\n  }\n\n  get citta(){\n    return this.segnalaBisogniForm.get(\"citta\")\n  }\n\n  get via(){\n    return this.segnalaBisogniForm.get(\"via\")\n  }\n\n  public errorMessages = {\n    nome: [\n      { type: \"required\", message: \"Questo campo è obbligatorio\" },\n      { type: \"maxlength\", message: \"Massimo 30 caratteri\" },\n      { type: \"minlength\", message: \"Minimo 5 caratteri\" }\n    ],\n    descrizione: [\n      { type: \"required\", message: \"Questo campo è obbligatorio\" },\n      { type: \"maxlength\", message: \"Massimo 500 caratteri\" }\n    ],\n    citta: [\n      { type: \"required\", message: \"Questo campo è obbligatorio\" },\n      { type: \"maxlength\", message: \"Massimo 30 caratteri\" },\n      { type: \"minlength\", message: \"Minimo 5 caratteri\" }\n    ],\n    via: [\n      { type: \"required\", message: \"Questo campo è obbligatorio\" },\n      { type: \"maxlength\", message: \"Massimo 60 caratteri\" },\n      { type: \"minlength\", message: \"Minimo 5 caratteri\" }\n    ],\n\n\n  }\n\n  segnalaBisogniForm = this.formBuilder.group({\n    nome: ['', [Validators.required, Validators.maxLength(30), Validators.minLength(5) ]],\n    descrizione: ['', [Validators.required, Validators.maxLength(500)]],\n    citta: ['', [Validators.required,Validators.maxLength(30),Validators.minLength(5)]],\n    via: ['', [Validators.required,Validators.maxLength(60),Validators.minLength(5)]]\n\n  })\n  \n  \n  constructor(\n    private formBuilder : FormBuilder,\n    private apiService: ApiService,\n    private navCtrl : NavController,\n    ) { \n      this.imgSrc= this.apiService.img\n      this.mobile = !(this.apiService.getPlatform().includes(\"mobileweb\") || this.apiService.getPlatform().includes(\"desktop\")) \n\n    }\n\n  ngOnInit() {\n  }\n\n  public submit(){\n\n    if (this.imgSend == null){\n      this.errore=\"Inserisci un allegato\"\n      return \n    }\n    //! Test su allegati e posizione.\n    this.position = this.position ?? false\n\n    let data = {\n      \"nome\" : this.segnalaBisogniForm.value.nome,\n      \"descrizione\" : this.segnalaBisogniForm.value.descrizione,\n      \"citta\" : this.segnalaBisogniForm.value.citta,\n      \"indirizzo\" : this.segnalaBisogniForm.value.via,\n      \"allegati\": this.imgSend,\n      \"posizione\": this.position\n    }\n\n    this.apiService.sendBisogni(data).then(api => {\n      api.subscribe({\n        next: (result) => {\n          this.apiService.simplyAlert( \n            () => {\n            this.navCtrl.navigateForward(\"/home\");\n            },\n            \"Operazione effettuata\",\n            \"Grazie per aver contribuito con la tua segnalazione!\"\n          )\n        },\n        error: (err) => {\n          this.apiService.simplyAlert()\n        }\n      })\n\n    })\n\n  }\n\n  getPosition(){\n    this.apiService.getCurrentPosition(\n      (position)=>{\n        this.position = { \n          \"latidute\": position.coords.latitude,\n          \"longitude\": position.coords.longitude,\n        }\n      }\n    )\n  }\n\n\n  chooseImage($event=null){\n    let handler = (img)=>{\n      this.imgSrc =  'data:image/jpeg;base64,' + img;\n      this.imgSend = img;\n    }\n\n    if (this.mobile){\n      this.apiService.chooseImage(handler)\n    }\n    else{\n      this.apiService.getImageBrowser($event,handler)\n    }\n  }\n\n}\n"]}