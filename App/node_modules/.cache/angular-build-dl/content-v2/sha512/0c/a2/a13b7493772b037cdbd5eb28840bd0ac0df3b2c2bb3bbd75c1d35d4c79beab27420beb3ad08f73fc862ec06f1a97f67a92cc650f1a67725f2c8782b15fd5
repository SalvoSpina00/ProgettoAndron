{"version":3,"sources":["./src/app/pages/segnala-bisogni/segnala-bisogni.module.ts","./src/app/pages/segnala-bisogni/segnala-bisogni.page.scss","./src/app/pages/segnala-bisogni/segnala-bisogni-routing.module.ts","./src/app/pages/segnala-bisogni/segnala-bisogni.page.html","./src/app/pages/segnala-bisogni/segnala-bisogni.page.ts"],"names":[],"mappings":"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","file":"pages-segnala-bisogni-segnala-bisogni-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SegnalaBisogniPageRoutingModule } from './segnala-bisogni-routing.module';\n\nimport { SegnalaBisogniPage } from './segnala-bisogni.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    IonicModule,\n    SegnalaBisogniPageRoutingModule\n  ],\n  declarations: [SegnalaBisogniPage]\n})\nexport class SegnalaBisogniPageModule {}\n","export default \".error-message {\\n  text-align: center;\\n  color: var(--ion-color-danger);\\n  padding-left: 20px;\\n}\\n\\nion-img {\\n  height: 30vh;\\n  width: auto;\\n  margin: auto;\\n  display: block;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NlZ25hbGEtYmlzb2duaS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxrQkFBQTtFQUNBLDhCQUFBO0VBQ0Esa0JBQUE7QUFDSjs7QUFFQTtFQUNJLFlBQUE7RUFDQSxXQUFBO0VBQ0EsWUFBQTtFQUNBLGNBQUE7QUFDSiIsImZpbGUiOiJzZWduYWxhLWJpc29nbmkucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmVycm9yLW1lc3NhZ2V7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItZGFuZ2VyKTtcbiAgICBwYWRkaW5nLWxlZnQ6IDIwcHg7XG59XG5cbmlvbi1pbWd7XG4gICAgaGVpZ2h0OiAzMHZoO1xuICAgIHdpZHRoOiBhdXRvO1xuICAgIG1hcmdpbjogYXV0bztcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgICBcbn1cbiJdfQ== */\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SegnalaBisogniPage } from './segnala-bisogni.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SegnalaBisogniPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SegnalaBisogniPageRoutingModule {}\n","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button autoHide=\\\"false\\\"></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>\\n        <ion-text>Segnala Bisogni</ion-text>\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-card style=\\\"background-color:rgb(29, 39, 61)\\\">\\n    <ion-card-header>\\n      <ion-card-subtitle>\\n        <div class=\\\"ion-text-center\\\">\\n          Benvenuto!\\n        </div>\\n      </ion-card-subtitle>\\n      <ion-card-content>\\n        In questa pagina potrai segnalare eventuali bisogni, una volta accettati verranno resi disponibili a tutti e chi vorrà potrà occuparsene!\\n      </ion-card-content>\\n    </ion-card-header>\\n  </ion-card>\\n  <form [formGroup]=\\\"segnalaBisogniForm\\\" (ngSubmit)=\\\"submit()\\\">\\n    <ion-list>\\n    \\n      <ion-img src=\\\"{{ imgSrc }}\\\"></ion-img>\\n      <ion-button *ngIf=\\\"mobile\\\"  id=\\\"myButtonYellow\\\" expand=\\\"full\\\" (click)=\\\"chooseImage()\\\">Inserisci foto</ion-button>\\n      <ion-button *ngIf=\\\"!mobile\\\" id=\\\"myButtonYellow\\\" expand=\\\"full\\\" (click)=\\\"f.click()\\\">Inserisci foto</ion-button>\\n      <input  class=\\\"ion-hide\\\" #f type=\\\"file\\\" (change)=\\\"chooseImage($event)\\\" id=\\\"file-input\\\" accept=\\\"image/png, image/jpeg\\\">\\n      <ion-item> <!--!Nome-->\\n        <ion-label position=\\\"floating\\\">Nome</ion-label>\\n        <ion-input formControlName=\\\"nome\\\" autocapitalize inputmode=\\\"text\\\"></ion-input>\\n      </ion-item>\\n      <div *ngFor=\\\"let error of errorMessages.nome\\\">\\n        <ng-container *ngIf=\\\"nome.hasError(error.type) && (nome.dirty || nome.touched)\\\">\\n          <small class=\\\"error-message\\\">{{error.message}}</small>\\n        </ng-container>\\n      </div>\\n\\n      <ion-item> <!--!Descrizione-->\\n        <ion-label position=\\\"floating\\\">Descrizione</ion-label>\\n        <ion-input formControlName=\\\"descrizione\\\" autocapitalize inputmode=\\\"text\\\"></ion-input>\\n      </ion-item>\\n      <div *ngFor=\\\"let error of errorMessages.descrizione\\\">\\n        <ng-container *ngIf=\\\"descrizione.hasError(error.type) && (descrizione.dirty || descrizione.touched)\\\">\\n          <small class=\\\"error-message\\\">{{error.message}}</small>\\n        </ng-container>\\n      </div>\\n\\n      <ion-card *ngIf=\\\"mobile\\\" style=\\\"background-color:rgb(29, 39, 61)\\\">\\n          <ion-card-content>\\n            Se ti trovi sul luogo clicca sul pulsante sottostante per recuperare la posizione!\\n          </ion-card-content>\\n      </ion-card>\\n\\n      <ion-button *ngIf=\\\"mobile\\\" id=\\\"myButtonYellow\\\" expand=\\\"full\\\" (click)=\\\"getPosition()\\\">Recupera posizione</ion-button>\\n\\n\\n      <ion-item> <!--!Citta-->\\n        <ion-label position=\\\"floating\\\">Città</ion-label>\\n        <ion-input formControlName=\\\"citta\\\" autocapitalize inputmode=\\\"text\\\"></ion-input>\\n      </ion-item>\\n      <div *ngFor=\\\"let error of errorMessages.citta\\\">\\n        <ng-container *ngIf=\\\"citta.hasError(error.type) && (citta.dirty || citta.touched)\\\">\\n          <small class=\\\"error-message\\\">{{error.message}}</small>\\n        </ng-container>\\n      </div>\\n\\n\\n      <ion-item> <!--!Via-->\\n        <ion-label position=\\\"floating\\\">Via</ion-label>\\n        <ion-input formControlName=\\\"via\\\" autocapitalize inputmode=\\\"text\\\"></ion-input>\\n      </ion-item>\\n      <div *ngFor=\\\"let error of errorMessages.via\\\">\\n        <ng-container *ngIf=\\\"via.hasError(error.type) && (via.dirty || via.touched)\\\">\\n          <small class=\\\"error-message\\\">{{error.message}}</small>\\n        </ng-container>\\n      </div>\\n\\n\\n      <ion-button [disabled]=\\\"!segnalaBisogniForm.valid\\\" type=\\\"submit\\\" expand=\\\"block\\\">\\n        Segnala Bisogni\\n      </ion-button>\\n      <p class=\\\"error-message\\\">{{this.errore}}</p>\\n    </ion-list>\\n  </form>\\n</ion-content>\\n\";","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { NavController } from '@ionic/angular';\nimport { ApiService } from 'src/app/services/api-service.service';\n\n\n@Component({\n  selector: 'app-segnala-bisogni',\n  templateUrl: './segnala-bisogni.page.html',\n  styleUrls: ['./segnala-bisogni.page.scss'],\n})\nexport class SegnalaBisogniPage implements OnInit {\n\n  imgSrc: any;\n  imgSend: any;\n  position: any;\n  mobile: boolean;\n  errore: string;\n\n  get nome(){\n    return this.segnalaBisogniForm.get(\"nome\")\n  }\n\n  get descrizione(){\n    return this.segnalaBisogniForm.get(\"descrizione\")\n  }\n\n  get citta(){\n    return this.segnalaBisogniForm.get(\"citta\")\n  }\n\n  get via(){\n    return this.segnalaBisogniForm.get(\"via\")\n  }\n\n  public errorMessages = {\n    nome: [\n      { type: \"required\", message: \"Questo campo è obbligatorio\" },\n      { type: \"maxlength\", message: \"Massimo 30 caratteri\" },\n      { type: \"minlength\", message: \"Minimo 5 caratteri\" }\n    ],\n    descrizione: [\n      { type: \"required\", message: \"Questo campo è obbligatorio\" },\n      { type: \"maxlength\", message: \"Massimo 500 caratteri\" }\n    ],\n    citta: [\n      { type: \"required\", message: \"Questo campo è obbligatorio\" },\n      { type: \"maxlength\", message: \"Massimo 30 caratteri\" },\n      { type: \"minlength\", message: \"Minimo 5 caratteri\" }\n    ],\n    via: [\n      { type: \"required\", message: \"Questo campo è obbligatorio\" },\n      { type: \"maxlength\", message: \"Massimo 60 caratteri\" },\n      { type: \"minlength\", message: \"Minimo 5 caratteri\" }\n    ],\n\n\n  }\n\n  segnalaBisogniForm = this.formBuilder.group({\n    nome: ['', [Validators.required, Validators.maxLength(30), Validators.minLength(5) ]],\n    descrizione: ['', [Validators.required, Validators.maxLength(500)]],\n    citta: ['', [Validators.required,Validators.maxLength(30),Validators.minLength(5)]],\n    via: ['', [Validators.required,Validators.maxLength(60),Validators.minLength(5)]]\n\n  })\n  \n  \n  constructor(\n    private formBuilder : FormBuilder,\n    private apiService: ApiService,\n    private navCtrl : NavController,\n    ) { \n      this.imgSrc= this.apiService.img\n      this.mobile = !(this.apiService.getPlatform().includes(\"mobileweb\") || this.apiService.getPlatform().includes(\"desktop\")) \n\n    }\n\n  ngOnInit() {\n  }\n\n  public submit(){\n\n    if (this.imgSend == null){\n      this.errore=\"Inserisci un allegato\"\n      return \n    }\n    //! Test su allegati e posizione.\n    this.position = this.position ?? false\n\n    let data = {\n      \"nome\" : this.segnalaBisogniForm.value.nome,\n      \"descrizione\" : this.segnalaBisogniForm.value.descrizione,\n      \"citta\" : this.segnalaBisogniForm.value.citta,\n      \"indirizzo\" : this.segnalaBisogniForm.value.via,\n      \"allegati\": this.imgSend,\n      \"posizione\": this.position\n    }\n\n    this.apiService.sendBisogni(data).then(api => {\n      api.subscribe({\n        next: (result) => {\n          this.apiService.simplyAlert( \n            () => {\n            this.navCtrl.navigateForward(\"/home\");\n            },\n            \"Operazione effettuata\",\n            \"Grazie per aver contribuito con la tua segnalazione!\"\n          )\n        },\n        error: (err) => {\n          this.apiService.simplyAlert()\n        }\n      })\n\n    })\n\n  }\n\n  getPosition(){\n    this.apiService.getCurrentPosition(\n      (position)=>{\n        this.position = { \n          \"latidute\": position.coords.latitude,\n          \"longitude\": position.coords.longitude,\n        }\n      }\n    )\n  }\n\n\n  chooseImage($event=null){\n    let handler = (img)=>{\n      this.imgSrc =  'data:image/jpeg;base64,' + img;\n      this.imgSend = img;\n    }\n\n    if (this.mobile){\n      this.apiService.chooseImage(handler)\n    }\n    else{\n      this.apiService.getImageBrowser($event,handler)\n    }\n  }\n\n}\n"],"sourceRoot":"webpack:///"}